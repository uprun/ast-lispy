{"operation":"create-initial-version","id_to":"6e0a91bbdabe7b843414b9f94d5a45a5d4d8831f13154894d71ac908213856d5","initial-data":{"name@lisperanto":"getMinimalOffsetForBox","type@lisperanto":"function","module@lisperanto":"lisperanto","programming-language@lisperanto":"javascript","previous-version@lisperanto":"0646cf51696368ad5cbac5b4e6ee6ce1f180c0e06ab84fe474235fc1c253c419","javascript-function-definition@lisperanto":"function(firstBox, secondBox, margin)\r\n{\r\n    var offsets = []; \r\n    var firstBoxCorners = lisperanto.generateCornersOfTheBox(firstBox);\r\n    for (const [key, pointF] of Object.entries(firstBoxCorners)) \r\n    {\r\n        if(lisperanto.isPointInsideTheBox(pointF, secondBox, margin=2))\r\n        {\r\n            var escapesFromSecondBox = lisperanto.getVectorsFromBox(pointF, secondBox, margin=2);\r\n            var firstBoxVectors = lisperanto.getVectorsFromBox(pointF, firstBox, margin=0);\r\n            for (const [key, escapeV] of Object.entries(escapesFromSecondBox)) \r\n            {\r\n                for (const [key, firstV] of Object.entries(firstBoxVectors)) \r\n                {\r\n                    if(lisperanto.vectorLengthSquared(firstV) > 0.1)\r\n                    {\r\n                        if(lisperanto.vectorsAreCoAligned(escapeV, firstV))\r\n                        {\r\n                            offsets.push(escapeV);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    if(offsets.length == 0)\r\n    {\r\n        return {x: 0, y: 0};\r\n    }\r\n    else\r\n    {\r\n        var minimalOffset = offsets[0];\r\n        for (const [key, o] of Object.entries(offsets)) \r\n        {\r\n            if(lisperanto.vectorLengthSquared(o) < lisperanto.vectorLengthSquared(minimalOffset))\r\n            {\r\n                minimalOffset = o;\r\n            }\r\n        }\r\n        return minimalOffset;\r\n    }\r\n}"},"time":"2022-09-24 23:46:50 (+3)"}